@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --color-dev-accent: #06302B;
  --color-dev-primary: #06302B;
  --color-dev-peach: #FFE5B4;
}

@layer base {
  body {
    @apply bg-dev-bg text-dev-text;
  }
  
  p {
    @apply text-lg leading-relaxed;
  }
  
  a {
    @apply font-medium no-underline text-dev-accent hover:underline;
  }
  
  ul {
    @apply ml-5 list-outside list-disc;
  }
  
  ol {
    @apply ml-5 list-outside list-decimal;
  }
  
  li {
    @apply text-lg leading-relaxed;
  }
}

@layer components {
  .prose {
    @apply max-w-none;
  }
  
  .prose p {
    @apply mb-4 leading-relaxed;
  }
  
  .prose a {
    @apply text-dev-accent hover:underline;
  }
  
  .prose ul, .prose ol {
    @apply mb-4 pl-6;
  }
  
  .prose li {
    @apply mb-2;
  }
  
  .prose li > a {
    display: inline-block;
    vertical-align: baseline;
  }
  
  .prose blockquote {
    @apply border-l-4 border-dev-accent pl-4 italic text-dev-secondary rounded-r-lg my-4;
    border-left-color: color-mix(in srgb, var(--color-dev-accent) 60%, transparent);
    background-color: color-mix(in srgb, var(--color-dev-accent) 5%, transparent);
  }
  
  .prose code {
    @apply px-2 py-1 rounded text-sm font-mono text-dev-text;
    background-color: color-mix(in srgb, var(--color-dev-accent) 10%, transparent);
  }
  
  .prose pre {
    @apply p-4 rounded-lg overflow-x-auto my-4;
    background-color: color-mix(in srgb, var(--color-dev-accent) 5%, transparent);
    border: 1px solid color-mix(in srgb, var(--color-dev-accent) 20%, transparent);
  }
  
  .prose pre code {
    @apply bg-transparent p-0 text-dev-text;
  }
  
  .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
    @apply font-bold text-dev-text mb-4 mt-8;
  }
  
  .prose h1 {
    @apply text-3xl lg:text-4xl;
  }
  
  .prose h2 {
    @apply text-2xl lg:text-3xl;
  }
  
  .prose h3 {
    @apply text-xl lg:text-2xl;
  }
  
  /* Deep link wrapper - contains both the button and copyable prompt */
  .prose .deep-link-wrapper {
    @apply my-4;
  }

  /* Deep link button styling */
  .prose .deep-link-button {
    @apply inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md font-medium no-underline;
    background-color: color-mix(in srgb, var(--color-dev-accent) 12%, transparent);
    border: 1px solid color-mix(in srgb, var(--color-dev-accent) 25%, transparent);
    transition: all 0.15s ease;
  }
  
  .prose .deep-link-button:hover {
    @apply no-underline;
    background-color: color-mix(in srgb, var(--color-dev-accent) 20%, transparent);
    border-color: color-mix(in srgb, var(--color-dev-accent) 40%, transparent);
  }
  
  .prose .deep-link-button::before {
    content: "▶";
    @apply text-xs opacity-70;
  }

  /* Deep link prompt block - the copyable text area */
  .prose .deep-link-prompt {
    @apply mt-2 relative rounded-lg overflow-hidden;
    background-color: color-mix(in srgb, var(--color-dev-accent) 5%, transparent);
    border: 1px solid color-mix(in srgb, var(--color-dev-accent) 15%, transparent);
  }

  .prose .deep-link-copy {
    @apply absolute top-2 right-2 flex items-center gap-1.5 px-2 py-1 text-xs rounded;
    @apply bg-dev-bg/80 hover:bg-dev-bg text-dev-text/70 hover:text-dev-text;
    @apply border border-dev-text/10 hover:border-dev-text/20;
    @apply cursor-pointer transition-all duration-150;
    backdrop-filter: blur(4px);
  }

  .prose .deep-link-copy:active {
    transform: scale(0.95);
  }

  .prose .deep-link-copy.copied {
    @apply text-green-600 border-green-500/30;
  }

  .prose .deep-link-copy.copied .copy-text {
    @apply hidden;
  }

  .prose .deep-link-copy.copied::after {
    content: "Copied!";
  }

  .prose .deep-link-code {
    @apply p-4 pr-24 m-0 text-sm overflow-x-auto;
    background: transparent !important;
    border: none !important;
  }

  .prose .deep-link-code code {
    @apply whitespace-pre-wrap break-words text-dev-text/80;
    background: transparent !important;
    font-size: 0.8rem;
    line-height: 1.5;
  }

  /* Legacy support: direct cursor:// links (not wrapped) */
  .prose a[href^="cursor://"]:not(.deep-link-button) {
    @apply inline-flex items-center gap-1.5 px-3 py-1.5 rounded-md font-medium no-underline;
    background-color: color-mix(in srgb, var(--color-dev-accent) 12%, transparent);
    border: 1px solid color-mix(in srgb, var(--color-dev-accent) 25%, transparent);
    transition: all 0.15s ease;
  }
  
  .prose a[href^="cursor://"]:not(.deep-link-button):hover {
    @apply no-underline;
    background-color: color-mix(in srgb, var(--color-dev-accent) 20%, transparent);
    border-color: color-mix(in srgb, var(--color-dev-accent) 40%, transparent);
  }
  
  .prose a[href^="cursor://"]:not(.deep-link-button)::before {
    content: "▶";
    @apply text-xs opacity-70;
  }

  /* Collapsible sections - styled like H3 (subordinate to H2) */
  .prose details {
    @apply my-4;
  }

  .prose details summary {
    @apply text-lg font-medium text-dev-text cursor-pointer list-none;
  }

  .prose details summary::-webkit-details-marker {
    display: none;
  }

  .prose details summary::before {
    content: "▸";
    @apply mr-2 inline-block;
    transition: transform 0.15s ease;
  }

  .prose details[open] > summary::before {
    content: "▾";
  }

  .prose details > *:not(summary) {
    @apply ml-5 mt-3;
  }
}
